v {xschem version=2.9.9 file_version=1.2 }
G {}
K {}
V {}
S {}
E {}
N 700 50 700 60 { lab=GND}
N 580 50 580 60 { lab=GND}
N 460 50 460 60 { lab=GND}
N 340 50 340 60 { lab=GND}
N 220 50 220 60 { lab=GND}
N 100 50 100 60 { lab=GND}
N 100 -310 100 -270 { lab=#net1}
N 220 -310 220 -270 { lab=#net1}
N 340 -310 340 -270 { lab=#net1}
N 460 -310 460 -270 { lab=#net1}
N 580 -310 580 -270 { lab=#net1}
N 700 -310 700 -270 { lab=#net1}
N 820 -320 820 -310 { lab=#net1}
N 100 -320 100 -310 { lab=#net1}
N 100 -320 820 -320 { lab=#net1}
N 220 -320 220 -310 { lab=#net1}
N 340 -320 340 -310 { lab=#net1}
N 460 -320 460 -310 { lab=#net1}
N 580 -320 580 -310 { lab=#net1}
N 700 -320 700 -310 { lab=#net1}
N 50 -320 100 -320 { lab=#net1}
N -150 -320 -140 -320 { lab=#net1}
N 820 -280 850 -280 { lab=Vout}
N -220 -320 -150 -320 { lab=#net1}
N 100 -170 100 -130 { lab=#net2}
N 100 -150 130 -150 { lab=#net2}
N 190 -150 250 -150 { lab=#net3}
N 220 -150 220 -130 { lab=#net3}
N 220 -170 220 -150 { lab=#net3}
N 340 -170 340 -130 { lab=#net4}
N 310 -150 340 -150 { lab=#net4}
N 340 -150 370 -150 { lab=#net4}
N 430 -150 490 -150 { lab=#net5}
N 460 -150 460 -130 { lab=#net5}
N 460 -170 460 -150 { lab=#net5}
N 550 -150 610 -150 { lab=#net6}
N 580 -150 580 -130 { lab=#net6}
N 580 -170 580 -150 { lab=#net6}
N 670 -150 730 -150 { lab=#net7}
N 700 -150 700 -130 { lab=#net7}
N 700 -170 700 -150 { lab=#net7}
N 790 -150 820 -150 { lab=#net8}
N 820 -160 820 -150 { lab=#net8}
N 820 -150 820 -120 { lab=#net8}
N 820 50 820 60 { lab=GND}
N 820 -170 820 -160 { lab=#net8}
N 820 -280 820 -270 { lab=Vout}
N 820 -290 820 -280 { lab=Vout}
N 820 -310 820 -300 { lab=#net1}
N -140 -320 50 -320 { lab=#net1}
N 10 -270 10 -260 { lab=#net1}
N 10 -200 10 -190 { lab=#net2}
N 220 -190 220 -170 { lab=#net3}
N 340 -190 340 -170 { lab=#net4}
N 460 -190 460 -170 { lab=#net5}
N 580 -190 580 -170 { lab=#net6}
N 700 -190 700 -170 { lab=#net7}
N 820 -190 820 -170 { lab=#net8}
N 220 -200 220 -190 { lab=#net3}
N 220 -270 220 -260 { lab=#net1}
N 340 -270 340 -260 { lab=#net1}
N 340 -200 340 -190 { lab=#net4}
N 460 -200 460 -190 { lab=#net5}
N 460 -270 460 -260 { lab=#net1}
N 580 -270 580 -260 { lab=#net1}
N 580 -200 580 -190 { lab=#net6}
N 700 -200 700 -190 { lab=#net7}
N 700 -270 700 -260 { lab=#net1}
N 790 -60 820 -60 { lab=#net8}
N 820 -120 820 -60 { lab=#net8}
N 100 -60 130 -60 { lab=#net2}
N 100 -130 100 -60 { lab=#net2}
N 190 -60 250 -60 { lab=#net3}
N 310 -60 370 -60 { lab=#net4}
N 430 -60 490 -60 { lab=#net5}
N 220 -130 220 -60 { lab=#net3}
N 340 -130 340 -60 { lab=#net4}
N 460 -130 460 -60 { lab=#net5}
N 550 -60 610 -60 { lab=#net6}
N 670 -60 730 -60 { lab=#net7}
N 580 -130 580 -60 { lab=#net6}
N 700 -130 700 -60 { lab=#net7}
N 100 -60 100 -10 { lab=#net2}
N 220 -60 220 -10 { lab=#net3}
N 340 -60 340 -10 { lab=#net4}
N 460 -60 460 -10 { lab=#net5}
N 580 -60 580 -10 { lab=#net6}
N 700 -60 700 -10 { lab=#net7}
N 820 -60 820 -10 { lab=#net8}
N 70 -230 190 -230 { lab=#net9}
N 190 -230 310 -230 { lab=#net9}
N 310 -230 430 -230 { lab=#net9}
N 430 -230 550 -230 { lab=#net9}
N 550 -230 670 -230 { lab=#net9}
N 820 -200 820 -190 { lab=#net8}
N 820 -270 820 -260 { lab=Vout}
N 820 -190 910 -190 { lab=#net8}
N 910 -200 910 -190 { lab=#net8}
N 820 -270 910 -270 { lab=Vout}
N 910 -270 910 -260 { lab=Vout}
N 790 -230 880 -230 { lab=#net9}
N 670 -230 790 -230 { lab=#net9}
N 160 -180 160 -90 { lab=#net9}
N 160 -230 160 -180 { lab=#net9}
N 280 -180 280 -90 { lab=#net9}
N 280 -230 280 -180 { lab=#net9}
N 400 -180 400 -90 { lab=#net9}
N 400 -230 400 -180 { lab=#net9}
N 520 -180 520 -90 { lab=#net9}
N 520 -230 520 -180 { lab=#net9}
N 640 -180 640 -90 { lab=#net9}
N 640 -230 640 -180 { lab=#net9}
N 760 -180 760 -90 { lab=#net9}
N 760 -230 760 -180 { lab=#net9}
N -80 -230 -20 -230 { lab=#net9}
N 100 -190 100 -170 { lab=#net2}
N -20 -230 70 -230 { lab=#net9}
N 100 -200 100 -190 { lab=#net2}
N 100 -270 100 -260 { lab=#net1}
N 10 -150 100 -150 { lab=#net2}
N 10 -190 10 -150 { lab=#net2}
N 10 -320 10 -270 { lab=#net1}
C {madvlsi/depisrc.sym} 100 20 0 0 {name=B1
func=\{Iref\}*v(b0)}
C {madvlsi/vsource.sym} 100 200 0 0 {name=Vb0
value=1}
C {madvlsi/gnd.sym} 820 60 0 0 {name=l1 lab=GND}
C {madvlsi/ammeter3.sym} 820 -300 0 1 {name=Viout}
C {madvlsi/gnd.sym} 700 60 0 0 {name=l2 lab=GND}
C {madvlsi/gnd.sym} 580 60 0 0 {name=l3 lab=GND}
C {madvlsi/gnd.sym} 460 60 0 0 {name=l4 lab=GND}
C {madvlsi/gnd.sym} 340 60 0 0 {name=l5 lab=GND}
C {madvlsi/gnd.sym} 220 60 0 0 {name=l6 lab=GND}
C {madvlsi/gnd.sym} 100 60 0 0 {name=l7 lab=GND}
C {madvlsi/gnd.sym} 100 230 0 0 {name=l8 lab=GND}
C {devices/lab_pin.sym} 100 170 2 0 {name=l9 sig_type=std_logic lab=b0}
C {madvlsi/depisrc.sym} 220 20 0 0 {name=B2
func=\{Iref\}*v(b1)}
C {madvlsi/vsource.sym} 220 200 0 0 {name=Vb1
value=1}
C {madvlsi/gnd.sym} 220 230 0 0 {name=l10 lab=GND}
C {devices/lab_pin.sym} 220 170 2 0 {name=l11 sig_type=std_logic lab=b1}
C {madvlsi/depisrc.sym} 340 20 0 0 {name=B3
func=\{Iref\}*v(b2)}
C {madvlsi/vsource.sym} 340 200 0 0 {name=Vb2
value=1}
C {madvlsi/gnd.sym} 340 230 0 0 {name=l12 lab=GND}
C {devices/lab_pin.sym} 340 170 2 0 {name=l13 sig_type=std_logic lab=b2}
C {madvlsi/depisrc.sym} 460 20 0 0 {name=B4
func=\{Iref\}*v(b3)}
C {madvlsi/vsource.sym} 460 200 0 0 {name=Vb3
value=1}
C {madvlsi/gnd.sym} 460 230 0 0 {name=l14 lab=GND}
C {devices/lab_pin.sym} 460 170 2 0 {name=l15 sig_type=std_logic lab=b3}
C {madvlsi/depisrc.sym} 580 20 0 0 {name=B5
func=\{Iref\}*v(b4)}
C {madvlsi/vsource.sym} 580 200 0 0 {name=Vb4
value=1}
C {madvlsi/gnd.sym} 580 230 0 0 {name=l16 lab=GND}
C {devices/lab_pin.sym} 580 170 2 0 {name=l17 sig_type=std_logic lab=b4}
C {madvlsi/depisrc.sym} 700 20 0 0 {name=B6
func=\{Iref\}*v(b5)}
C {madvlsi/vsource.sym} 700 200 0 0 {name=Vb5
value=1}
C {madvlsi/gnd.sym} 700 230 0 0 {name=l18 lab=GND}
C {devices/lab_pin.sym} 700 170 2 0 {name=l19 sig_type=std_logic lab=b5}
C {madvlsi/depisrc.sym} 820 20 0 0 {name=B7
func=\{Iref\}*v(b6)}
C {madvlsi/vsource.sym} 820 200 0 0 {name=Vb6
value=1}
C {madvlsi/gnd.sym} 820 230 0 0 {name=l20 lab=GND}
C {devices/lab_pin.sym} 820 170 2 0 {name=l21 sig_type=std_logic lab=b6}
C {devices/lab_pin.sym} 850 -280 2 0 {name=l23 sig_type=std_logic lab=Vout}
C {devices/code.sym} 1020 -360 0 0 {name=SPICE only_toplevel=false value=".param Iref=100u
.param MC_SWITCH = 0.0
.param l=8
.param w=4
.control
  set wr_vecnames
  set wr_singlescale
  let code = 0
  while code < 128
    if code eq 0
      let b0 = 0
    else
      let b0 = code % 2
    end
    if floor(code / 2) eq 0
      let b1 = 0
    else
      let b1 = floor(code / 2) % 2
    end
    if floor(code / 4) eq 0
      let b2 = 0
    else
      let b2 = floor(code / 4) % 2
    end
    if floor(code / 8) eq 0
      let b3 = 0
    else
      let b3 = floor(code / 8) % 2
    end
    if floor(code / 16) eq 0
      let b4 = 0
    else 
      let b4 = floor(code / 16) % 2
    end
    if floor(code / 32) eq 0
      let b5 = 0
    else
      let b5 = floor(code / 32) % 2
    end
    if floor(code / 64) eq 0
      let b6 = 0
    else
      let b6 = floor(code / 64) % 2
    end
    alter vb0 $&b0
    alter vb1 $&b1
    alter vb2 $&b2
    alter vb3 $&b3
    alter vb4 $&b4
    alter vb5 $&b5
    alter vb6 $&b6
    save all
    op
    wrdata ~/Documents/dactut/dactut.txt v(b0) v(b1) v(b2) v(b3) v(b4) v(b5) v(b6) i(Viout) v(Vout)
    if code eq 0
      set appendwrite
      set wr_vecnames = FALSE
    end
    let code = code + 1
  end
  quit
.endc
.lib ~/skywater/skywater-pdk/libraries/sky130_fd_pr_ngspice/latest/models/sky130.lib.spice tt"}
C {madvlsi/vsource.sym} -220 -290 0 0 {name=Vdd
value=1.8}
C {madvlsi/gnd.sym} -220 -260 0 0 {name=l22 lab=GND}
C {madvlsi/vsource.sym} -80 -200 0 0 {name=Vg
value=0.9}
C {madvlsi/gnd.sym} -80 -170 0 0 {name=l47 lab=GND}
C {madvlsi/nmos3.sym} 10 -230 0 0 {name=M1
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 910 -230 0 0 {name=M21
L=0.15
W=1
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 100 -230 0 0 {name=M2
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 220 -230 0 0 {name=M3
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 340 -230 0 0 {name=M4
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 460 -230 0 0 {name=M5
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 580 -230 0 0 {name=M6
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 700 -230 0 0 {name=M7
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 820 -230 0 0 {name=M8
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 760 -150 1 0 {name=M9
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 760 -60 1 0 {name=M10
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 640 -150 1 0 {name=M11
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 640 -60 1 0 {name=M12
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 520 -150 1 0 {name=M13
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 520 -60 1 0 {name=M14
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 400 -150 1 0 {name=M15
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 400 -60 1 0 {name=M16
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 280 -150 1 0 {name=M17
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 280 -60 1 0 {name=M18
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 160 -150 1 0 {name=M19
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {madvlsi/nmos3.sym} 160 -60 1 0 {name=M20
L=l
W=w
body=GND
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
